{"version":3,"file":"index.esm.js","sources":["../index.js"],"sourcesContent":["function isNode (node) {\r\n  return typeof node === \"string\" ? document.getElementById(node) : node;\r\n}\r\n\r\nexport default function SplitViews (options) {\r\n\r\n  let defaultOptions = {\r\n    parent: 'split-view',\r\n    direction: 'vertical',\r\n    gutterSize: 5,\r\n    minSize: 20,\r\n    sizes: [],\r\n    onDragEnd: options.onDragEnd,\r\n    ...options\r\n  };\r\n\r\n  let parentElement = isNode(defaultOptions.parent),\r\n    children = Array.from(parentElement.children),\r\n    isMouseOnGutter = false,\r\n    childSize = 100 / children.length;\r\n\r\n  let direction = defaultOptions.direction,\r\n    sizes = defaultOptions.sizes,\r\n    onDragEnd = defaultOptions.onDragEnd,\r\n    gutterId = 0,\r\n    offset = 0;\r\n\r\n  let leftChild = null, rightChild = null, leftChildRect = {}, rightChildRect = {};\r\n  let sizeDir = direction === 'vertical' ? 'width' : 'height';\r\n\r\n  for (let index = 0; index < children.length; index++) {\r\n    const child = children[index];\r\n\r\n    let gutterSize = defaultOptions.gutterSize / 2;\r\n\r\n    child.style[sizeDir] = sizes.length === children.length\r\n      ? `calc(${sizes[index]}% - ${gutterSize}px)`\r\n      : `calc(${childSize}% - ${gutterSize}px)`;\r\n\r\n    if (index < children.length - 1) {\r\n      const gutter = document.createElement('span');\r\n      const gutterCls = direction === 'vertical' ? \"gutter-vertical\" : \"gutter-horizontal\";\r\n\r\n      gutter.classList.add(\"gutter\", gutterCls);\r\n\r\n      gutter.style[sizeDir] = defaultOptions.gutterSize + 'px';\r\n      gutter.dataset.id = index;\r\n      child.parentNode.insertBefore(gutter, child.nextSibling);\r\n    }\r\n  }\r\n\r\n  function onMouseDown (e) {\r\n    if (e.target && e.target.classList.contains('gutter')) {\r\n      isMouseOnGutter = true;\r\n      gutterId = parseInt(e.target.dataset.id, 10);\r\n\r\n      offset = direction === 'vertical' ? e.offsetX : e.offsetY;\r\n\r\n      leftChild = children[gutterId];\r\n      rightChild = children[gutterId + 1];\r\n\r\n      leftChildRect = leftChild.getBoundingClientRect();\r\n      rightChildRect = rightChild.getBoundingClientRect();\r\n\r\n      parentElement.addEventListener('mousemove', onMouseMove, false);\r\n      parentElement.addEventListener('mouseup', onMouseUp, false);\r\n    }\r\n  }\r\n\r\n  function onMouseUp () {\r\n    isMouseOnGutter = false;\r\n    parentElement.removeEventListener('mousemove', onMouseMove, false);\r\n    parentElement.removeEventListener('mouseup', onMouseUp, false);\r\n\r\n    if (onDragEnd) {\r\n      let parentSize = direction === 'vertical'\r\n        ? parentElement.offsetWidth\r\n        : parentElement.offsetHeight;\r\n\r\n      let newSizes = children.map(child => child.getBoundingClientRect().width / parentSize * 100);\r\n      onDragEnd(newSizes);\r\n    }\r\n  }\r\n\r\n  function onMouseMove (e) {\r\n    if (isMouseOnGutter && leftChild && rightChild) {\r\n\r\n      let parentSize = direction === 'vertical'\r\n        ? parentElement.offsetWidth : parentElement.offsetHeight;\r\n\r\n      let leftElNewSize = direction === 'vertical'\r\n        ? (e.clientX - leftChildRect.x) - offset\r\n        : (e.clientY - leftChildRect.y) - offset;\r\n\r\n      let rightElNewSize = direction === 'vertical'\r\n        ? rightChildRect.width + (leftChildRect.width - leftElNewSize)\r\n        : rightChildRect.height + (leftChildRect.height - leftElNewSize);\r\n\r\n      let leftP = leftElNewSize / parentSize * 100;\r\n      let rightP = rightElNewSize / parentSize * 100;\r\n\r\n      if (leftP >= defaultOptions.minSize && rightP >= defaultOptions.minSize) {\r\n        leftChild.style[sizeDir] = leftP + '%';\r\n        rightChild.style[sizeDir] = rightP + '%';\r\n      }\r\n    }\r\n\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }\r\n\r\n  parentElement.addEventListener('mousedown', onMouseDown, false);\r\n}\r\n"],"names":["SplitViews","options","defaultOptions","parent","direction","gutterSize","minSize","sizes","onDragEnd","parentElement","node","document","getElementById","children","Array","from","isMouseOnGutter","childSize","length","gutterId","offset","leftChild","rightChild","leftChildRect","rightChildRect","sizeDir","index","child","style","gutter","createElement","gutterCls","classList","add","dataset","id","parentNode","insertBefore","nextSibling","onMouseUp","removeEventListener","onMouseMove","parentSize","offsetWidth","offsetHeight","newSizes","map","getBoundingClientRect","width","e","leftElNewSize","clientX","x","clientY","y","leftP","rightP","height","preventDefault","stopPropagation","addEventListener","target","contains","parseInt","offsetX","offsetY"],"mappings":"AAIe,SAASA,EAAYC,GAElC,IAAIC,EAAiB,CACnBC,OAAQ,aACRC,UAAW,WACXC,WAAY,EACZC,QAAS,GACTC,MAAO,GACPC,UAAWP,EAAQO,aAChBP,GAGDQ,EAfmB,iBADRC,EAgBYR,EAAeC,QAfRQ,SAASC,eAAeF,GAAQA,EAgBhEG,EAAWC,MAAMC,KAAKN,EAAcI,UACpCG,GAAkB,EAClBC,EAAY,IAAMJ,EAASK,OAnB/B,IAAiBR,EAqBf,IAAIN,EAAYF,EAAeE,UAC7BG,EAAQL,EAAeK,MACvBC,EAAYN,EAAeM,UAC3BW,EAAW,EACXC,EAAS,EAEPC,EAAY,KAAMC,EAAa,KAAMC,EAAgB,GAAIC,EAAiB,GAC1EC,EAAwB,aAAdrB,EAA2B,QAAU,SAEnD,IAAK,IAAIsB,EAAQ,EAAGA,EAAQb,EAASK,OAAQQ,IAAS,CACpD,MAAMC,EAAQd,EAASa,GAEvB,IAAIrB,EAAaH,EAAeG,WAAa,EAM7C,GAJAsB,EAAMC,MAAMH,GAAWlB,EAAMW,SAAWL,EAASK,OAC7C,QAAQX,EAAMmB,SAAarB,OAC3B,QAAQY,QAAgBZ,OAExBqB,EAAQb,EAASK,OAAS,EAAG,CAC/B,MAAMW,EAASlB,SAASmB,cAAc,QAChCC,EAA0B,aAAd3B,EAA2B,kBAAoB,oBAEjEyB,EAAOG,UAAUC,IAAI,SAAUF,GAE/BF,EAAOD,MAAMH,GAAWvB,EAAeG,WAAa,KACpDwB,EAAOK,QAAQC,GAAKT,EACpBC,EAAMS,WAAWC,aAAaR,EAAQF,EAAMW,cAsBhD,SAASC,IAKP,GAJAvB,GAAkB,EAClBP,EAAc+B,oBAAoB,YAAaC,GAAa,GAC5DhC,EAAc+B,oBAAoB,UAAWD,GAAW,GAEpD/B,EAAW,CACb,IAAIkC,EAA2B,aAAdtC,EACbK,EAAckC,YACdlC,EAAcmC,aAEdC,EAAWhC,EAASiC,KAAInB,GAASA,EAAMoB,wBAAwBC,MAAQN,EAAa,MACxFlC,EAAUqC,IAId,SAASJ,EAAaQ,GACpB,GAAIjC,GAAmBK,GAAaC,EAAY,CAE9C,IAAIoB,EAA2B,aAAdtC,EACbK,EAAckC,YAAclC,EAAcmC,aAE1CM,EAA8B,aAAd9C,EACf6C,EAAEE,QAAU5B,EAAc6B,EAAKhC,EAC/B6B,EAAEI,QAAU9B,EAAc+B,EAAKlC,EAMhCmC,EAAQL,EAAgBR,EAAa,IACrCc,GAL+B,aAAdpD,EACjBoB,EAAewB,OAASzB,EAAcyB,MAAQE,GAC9C1B,EAAeiC,QAAUlC,EAAckC,OAASP,IAGtBR,EAAa,IAEvCa,GAASrD,EAAeI,SAAWkD,GAAUtD,EAAeI,UAC9De,EAAUO,MAAMH,GAAW8B,EAAQ,IACnCjC,EAAWM,MAAMH,GAAW+B,EAAS,KAIzCP,EAAES,iBACFT,EAAEU,kBAGJlD,EAAcmD,iBAAiB,aA5D/B,SAAsBX,GAChBA,EAAEY,QAAUZ,EAAEY,OAAO7B,UAAU8B,SAAS,YAC1C9C,GAAkB,EAClBG,EAAW4C,SAASd,EAAEY,OAAO3B,QAAQC,GAAI,IAEzCf,EAAuB,aAAdhB,EAA2B6C,EAAEe,QAAUf,EAAEgB,QAElD5C,EAAYR,EAASM,GACrBG,EAAaT,EAASM,EAAW,GAEjCI,EAAgBF,EAAU0B,wBAC1BvB,EAAiBF,EAAWyB,wBAE5BtC,EAAcmD,iBAAiB,YAAanB,GAAa,GACzDhC,EAAcmD,iBAAiB,UAAWrB,GAAW,OA8CA"}